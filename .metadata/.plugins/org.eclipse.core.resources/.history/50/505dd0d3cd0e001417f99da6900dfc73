/*
 * Michael Wielgosz
 * MIU Term: 1407
 * About Me app
 */

// Global variables
var pHeight = Ti.Platform.displayCaps.getPlatformHeight(),
    bgColor = "#202020",
    bgImage = "background.png",
	loadJsonData = require("json"),
    jsonData = loadJsonData.json;

// Main app window
var mainWindow = Ti.UI.createWindow({
    title: "Top Smartphones",
    backgroundColor: bgColor,
    backgroundImage: bgImage,
    backgroundRepeat: true
});

// NavigationWindow object for iOS
var navWindow = Ti.UI.iOS.createNavigationWindow({
    window: mainWindow
});

// Function to dynamically open windows
var openPageWindow = function() {
    var pageWindow = Ti.UI.createWindow({
        backgroundColor: bgColor,
        backgroundImage: bgImage,
        backgroundRepeat: true,
        title: this.text,
        url: this.windowURL,
        nav: navWindow
    });

    navWindow.openWindow(pageWindow);
};

// Table view for JSON content
var questionTable = Ti.UI.createTableView({
    style: Ti.UI.iPhone.TableViewStyle.GROUPED,
    top: 0
});

// Loop to fill in question table
for(var i=0; i < jsonData.length; i++) {
	
	// Table view section
	var questionSection = Ti.UI.createTableViewSection({
		headerTitle: "Questions about me",
		top: 0
	});

	for(i2 in jsonData[i]){
	
    // Dynamically create each table view row
    var questionTableRow = Ti.UI.createTableViewRow({
        title: jsonData[i][i2].question,
        desc: jsonData[i][i2].question,
        hasDetail: true
    });

    // Add row to section
    questionSection.add(questionTableRow);
    console.log(jsonData[i][i2].question);
    questionTable.add(jsonData[i][i2].question);
    //questionTable.add(questionSection);
   }
}

// Fill table with data
//questionTable.setData(tableSections);
questionTable.setData(jsonData.question);
//questionTable.add(questionSection);

// Event listener for table
/*questionTable.addEventListener("click", function(clickEvent){
    displayDescriptionView(clickEvent.source);
});*/

//questionTable.add(questionSection);

mainWindow.add(questionTable);

// Loop to create lables based on the menuTitles array
/*for (i=0; i < menuTitles.length; i++) {
    var menuLabel = Ti.UI.createLabel({
        text: menuTitles[i].name,
        font: {fontSize: 36, fontFamily: "Copperplate"},
        textAlign: "center",
        color: "#000",
        borderColor: "#aaa",
        borderWidth: 1,
        borderRadius: 10,
        height: "20%",
        top: 5,
        left: 5,
        right: 5,
        shadowColor: "#aaa",
        shadowOffset: { x: 1, y: 1 },
        backgroundGradient: {
            type: 'linear',
            startPoint: { x: '50%', y: '0%' },
            endPoint: { x: '50%', y: '100%' },
            colors: [
                { color: '#202020', offset: 0.0 },
                { color: menuTitles[i].color, offset: 1.0 }
            ],
        },
        windowURL: menuTitles[i].windowURL
    });

    menuLabel.addEventListener("click", openPageWindow);

    mainWindow.add(menuLabel);
}

// Label to display term number and name
var infoLabel = Ti.UI.createLabel({
    text: "VFW 1404 - Michael Wielgosz",
    font: {fontSize: 12, fontFamily: "Optima-Regular"},
    textAlign: "center",
    color: "#fff",
    top: menuLabel.height
});

mainWindow.add(infoLabel);*/

navWindow.open();
